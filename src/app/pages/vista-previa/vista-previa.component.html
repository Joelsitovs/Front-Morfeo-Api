<section
  class="w-full min-h-[calc(100vh-64px)] flex flex-col items-center pt-10  text-black dark:text-white transition-colors duration-300"
>
  <div class="w-full max-w-4xl mx-auto px-4 flex flex-col  gap-5">
    <div class="flex justify-between items-center">
      <div class="flex flex-col items-center gap-2">
        <div class="rounded-full  border-2  p-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
               class="lucide lucide-upload-icon lucide-upload">
            <path d="M12 3v12" />
            <path d="m17 8-5-5-5 5" />
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
          </svg>
        </div>
        <span class="text-sm font-semibold ">

        Subir Modelo
        </span>
      </div>
      <div class="flex-grow h-0.5  bg-[#52525b]"></div>

      <div class="flex flex-col items-center gap-2">
        <div class="rounded-full  border-2  p-2">

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
               class="lucide lucide-settings-icon lucide-settings">
            <path
              d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" />
            <circle cx="12" cy="12" r="3" />
          </svg>
        </div>
        <span class="text-sm font-semibold ">

        Configurar

        </span>
      </div>
      <div class="flex-grow h-0.5  bg-[#52525b]"></div>
      <div class="flex flex-col items-center gap-2 text-[#a1a1aa]">
        <div class="rounded-full  border-2  p-2 border-[#52525b] ">

          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
               class="lucide lucide-upload-icon lucide-upload w-5 h-5 ">
            <path d="M12 3v12" />
            <path d="m17 8-5-5-5 5" />
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
          </svg>
        </div>

        <span class="text-sm   ">
        Ordenar
        </span>
      </div>
    </div>
    <div class="flex flex-col gap-5">

      <h2 class="text-2xl font-bold  text-start">
        Arrastra o Carga tus Modelos 3D
      </h2>

      <div
        class="w-full  bg-white  dark:bg-[#1e1e1e] p-5 rounded-xl gap-5 flex flex-col shadow-lg border  border-gray-200 dark:border-[#52525b]">

        <div
          class="w-full border-2 border-dotted border-[#52525b] rounded-lg text-center cursor-pointer
         hover:bg-blue-50 dark:hover:bg-white/5 transition-all duration-300 flex flex-col justify-center items-center p-10 gap-5"
          (dragover)="onDragOver($event)"
          (dragleave)="onDragLeave($event)"
          (keydown.enter)="triggerFileInput()"
          (keydown.space)="triggerFileInput()"
          role="button"
          tabindex="0"
          (click)="triggerFileInput()"
          (drop)="onDrop($event)"
          [class.bg-blue-100]="isDragging"
        >
          <input
            type="file"
            multiple
            hidden
            #fileInput
            (change)="onFileSelect($event)"
          />
          <div class="w-10 h-10 flex items-center justify-center text-[#338ef7]">

            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                 class="lucide lucide-cloud-upload-icon lucide-cloud-upload">
              <path d="M12 13v8" />
              <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242" />
              <path d="m8 17 4-4 4 4" />
            </svg>
          </div>
          <div>
            <p class="text-lg">Arrastrá tus archivos aquí</p>
            <p class="text-sm text-gray-500 dark:text-gray-400">o hacé clic para seleccionar</p>
          </div>
          <div class="flex flex-wrap justify-center items-center gap-3 text-sm text-[#66aaf9] ">

            <button
              type="button"
              (click)="triggerFileInput(); $event.stopPropagation()"

              class="bg-[#338ef7]  text-white font-semibold py-2 px-4 rounded-lg transition flex items-center justify-center gap-2 text-sm"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                   class="lucide lucide-file-plus-icon lucide-file-plus h-4 w-4">
                <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" />
                <path d="M14 2v4a2 2 0 0 0 2 2h4" />
                <path d="M9 15h6" />
                <path d="M12 18v-6" />
              </svg>
              <span class="text-xs">
              Seleccionar Archivos
            </span>
            </button>
            <button
              type="button"
              (click)="usarPiezaTest($event)"
              class="border border-gray-400 dark:border-[#3f3f46] text-gray-600 dark:text-gray-300 font-semibold py-2 px-4 rounded-lg transition flex items-center justify-center gap-2 text-sm"
            >
              <span class="text-xs">Utilizar pieza de test</span>
            </button>

          </div>

          <div class="flex flex-wrap justify-center items-center gap-3 text-sm text-[#66aaf9] ">
  <span
    class="bg-[#338ef733] border border-[#66aaf955] dark:border-[#66aaf955] rounded-full px-3 h-6 flex items-center justify-center">
    .stl
  </span>
            <span
              class="bg-[#338ef733] border border-[#66aaf955] dark:border-[#66aaf955] rounded-full px-3 h-6 flex items-center justify-center">
    .obj
  </span>
            <span
              class="bg-[#338ef733] border border-[#66aaf955] dark:border-[#66aaf955] rounded-full px-3 h-6 flex items-center justify-center">
    .3ds
  </span>
            <span
              class="bg-[#338ef733] border border-[#66aaf955] dark:border-[#66aaf955] rounded-full px-3 h-6 flex items-center justify-center">
    .glb
  </span>
            <span
              class="bg-[#338ef733] border border-[#66aaf955] dark:border-[#66aaf955] rounded-full px-3 h-6 flex items-center justify-center">
    .gltf
  </span>
          </div>
        </div>
        <div class="flex  gap-2 text-[#a1a1aa] items-center">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
               class="lucide lucide-lock-icon lucide-lock w-4 h-4 text-[#17c964]">
            <rect width="18" height="11" x="3" y="11" rx="2" ry="2" />
            <path d="M7 11V7a5 5 0 0 1 10 0v4" />
          </svg>
          <span>Todos los archivos cargados son confidenciales. </span>
        </div>


        <!--Info-->
        <div class="w-full space-y-4">
          <div class="flex justify-between items-center text-sm font-semibold text-blue-500">
            @if (archivos.length) {
              <span>Archivos ({{ archivos.length }})</span>
              <button
                class="text-pink-500 hover:underline text-xs flex items-center gap-1"
                (click)="limpiarTodo()"
              >
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="lucide lucide-trash-icon lucide-trash h-5 w-5">
                  <path d="M3 6h18" />
                  <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" />
                  <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
                </svg>
                Limpiar todo
              </button>
            }
          </div>
          @for (item of archivos; track item) {

            <div class="bg-[#1e1e1e] border border-[#52525b] rounded-lg p-2 flex flex-col gap-2">
              <div class="flex flex-col  w-full gap-3 mx-auto">
                <div class="flex justify-between items-center gap-2 text-sm text-gray-400 ">
                  <div class="text-xs space-y-2">
                    <p>{{ item.file.name }}</p>
                    <p class="text-gray-400">{{ formatearPeso(item.file.size) }}</p>

                  </div>
                  <div class="flex items-center gap-2">
                    @if (item.estado === 'completado') {
                      <span class="bg-[#17c96433] text-xs px-3 py-1 rounded-full text-[#17c964]">
      Completado
    </span>
                    }

                    @if (item.estado === 'subiendo') {
                      <span class="bg-[#66AAF9] text-xs px-3 py-1 rounded-full text-[#006FEE]">
  Subiendo... {{ item.progreso.toFixed(2) }}%
    </span>
                    }

                    <button class="text-pink-500 hover:underline text-xs flex items-center gap-1"
                            (click)="eliminarArchivo(item)">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                           stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                           class="lucide lucide-x-icon lucide-x w-4 h-4">
                        <path d="M18 6 6 18" />
                        <path d="m6 6 12 12" />
                      </svg>
                    </button>

                  </div>

                </div>
                @if (item.estado !== 'completado') {
                  <div class="h-1 w-full bg-gray-700 rounded">
                    <div
                      class="h-full bg-blue-500 rounded overflow-hidden"
                      [@progressBar]="{ value: '*', params: { width: item.progreso } }"
                    ></div>

                  </div>
                }

              </div>
            </div>
          }

        </div>

      </div>
      @if (previewUrl) {

      <app-model-viewer

        [modelUrl]="previewUrl"
        [file]="archivos[archivos.length - 1].file"
      />
      }



    </div>
    ola
  </div>

</section>